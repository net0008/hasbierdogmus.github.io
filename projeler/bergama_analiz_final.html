import ee
import geemap

# Earth Engine kimlik doğrulaması
try:
    ee.Initialize()
except Exception as e:
    ee.Authenticate()
    ee.Initialize()

# 1. Bergama ROI (İlgi Alanı) Belirleme
roi = ee.Geometry.Point([27.1784, 39.1223]).buffer(10000).bounds()

# 2. Katmanlar: Topografya ve Su Verisi
dem = ee.Image('USGS/SRTMGL1_003').clip(roi)
dem_vis = {'min': 0, 'max': 500, 'palette': ['green', 'yellow', 'brown', 'white']}

water = ee.Image("JRC/GSW1_4/GlobalSurfaceWater").select('occurrence')
water_vis = {'min': 0, 'max': 100, 'palette': ['white', 'blue']}

# 3. Kıyaslama (Split-Panel) Haritasını Oluştur
left_layer = geemap.ee_tile_layer(dem, dem_vis, 'Topografya (Yükseklik)')
right_layer = geemap.ee_tile_layer(water, water_vis, 'Su/Sel Analizi')

m = geemap.Map(center=[39.1223, 27.1784], zoom=12)
m.split_map(left_layer, right_layer)

# 4. KRİTİK: Google Sites ve Web için HTML Olarak Kaydet
# Bu fonksiyon haritayı tüm kütüphaneleriyle birlikte paketler.
m.to_html("bergama_analiz_final.html")

print("Dosya oluşturuldu. 'bergama_analiz_final.html' dosyasını Colab'dan bilgisayarınıza indirin.")
